<div class="dashboard-container">
  <div class="profile-card animate-card">

    <!-- Header -->
    <div class="profile-header text-center">
      <img
        [src]="'https://api.dicebear.com/9.x/adventurer/svg?seed=' + (profileForm.get('name')?.value || 'user')"
        alt="Avatar"
        class="avatar-img"
      />
      <h2>Update <span>Profile</span> ðŸ§¾</h2>
      <p class="subtitle">Keep your info up to date!</p>
    </div>

    <div class="divider"></div>

    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="profile-form">

      <!-- Full Name -->
      <mat-form-field appearance="outline">
        <mat-label>Full Name</mat-label>
        <mat-icon matPrefix>person</mat-icon>
        <input matInput formControlName="name" required />
      </mat-form-field>

      <!-- Email -->
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <mat-icon matPrefix>email</mat-icon>
        <input matInput type="email" formControlName="email" required />
      </mat-form-field>

      <!-- Address -->
      <mat-form-field appearance="outline">
        <mat-label>Address</mat-label>
        <mat-icon matPrefix>home</mat-icon>
        <textarea matInput rows="2" formControlName="address"></textarea>
      </mat-form-field>

      <!-- Phone Numbers -->
      <div formArrayName="phoneNumbers" class="phone-section">
        <label class="phone-label"><mat-icon>call</mat-icon> Phone Numbers</label>
        <div *ngFor="let control of phoneNumbers.controls; let i = index" class="phone-row">
          <mat-form-field appearance="outline" class="phone-field">
            <input matInput [formControlName]="i" placeholder="Enter 10-digit number" maxlength="10" />
          </mat-form-field>
          <button
            mat-icon-button
            color="warn"
            type="button"
            (click)="removePhone(i)"
            *ngIf="phoneNumbers.length > 1"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>

        <button
          mat-stroked-button
          color="primary"
          type="button"
          (click)="addPhone()"
          [disabled]="phoneNumbers.at(phoneNumbers.length - 1).invalid || loading"
        >
          <mat-icon>add</mat-icon> Add Phone
        </button>
      </div>

      <div class="divider"></div>

      <!-- Submit -->
      <div class="action-buttons">
        <button mat-raised-button color="primary" type="submit" [disabled]="loading || profileForm.invalid">
          <mat-icon>save</mat-icon> {{ loading ? 'Saving...' : 'Save Changes' }}
        </button>
      </div>

      <!-- Error -->
      <p *ngIf="errorMessage" class="error-text">{{ errorMessage }}</p>
    </form>
  </div>
</div>
